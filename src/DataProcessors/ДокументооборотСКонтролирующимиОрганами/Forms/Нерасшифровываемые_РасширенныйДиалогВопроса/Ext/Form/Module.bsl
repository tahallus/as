
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ПоказатьПричину = Неопределено;
	Если Не Параметры.Свойство("ПоказатьПричину", ПоказатьПричину) Тогда 
		ПоказатьПричину = Ложь;
	КонецЕсли;
	Элементы.Причина.Видимость = ПоказатьПричину;
	
	ПоказатьВажное = Неопределено;
	Если Не Параметры.Свойство("ТекстВажного") Тогда 
		ПоказатьВажное = Ложь;
	Иначе
		ПоказатьВажное = ЗначениеЗаполнено(Параметры.ТекстВажного);
		Если ПоказатьВажное Тогда 
			ТекстВажного = Параметры.ТекстВажного;
		КонецЕсли;
	КонецЕсли;
	Элементы.ТекстВажного.Видимость = ПоказатьВажное;
	
	Элементы.ТекстВопроса.Заголовок = ЭтаФорма.Параметры.ТекстВопроса;
	
	Если ЗначениеЗаполнено(Параметры.ЗаголовокКнопкиОК) Тогда 
		Элементы.ФормаКомандаНеРасшифровывать.Заголовок = Параметры.ЗаголовокКнопкиОК;
		
		ЗаголовокКнопки = НРег(Параметры.ЗаголовокКнопкиОК);
		Если СтрНайти(ЗаголовокКнопки, "не расшифровывать") > 0
			Или СтрНайти(ЗаголовокКнопки, "недоступность") > 0 Тогда 
			Элементы.КартинкаПредупреждение.Видимость = Истина;
		Иначе 
			Элементы.КартинкаПредупреждение.Видимость = Ложь;
		КонецЕсли;
	КонецЕсли;
	
	ЭтаФорма.АвтоЗаголовок = Ложь;
	ЭтаФорма.Заголовок = "Внимание!";
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаНавигационнойСсылки(НавигационнаяСсылкаФорматированнойСтроки, СтандартнаяОбработка)
	
	Если СтрНайти(ЭтаФорма.ВладелецФормы.ВладелецФормы.ИмяФормы, "Нерасшифровываемые_УправлениеОшибкамиОбмена") <> 0
		ИЛИ СтрНайти(ЭтаФорма.ВладелецФормы.ИмяФормы, "Нерасшифровываемые_УправлениеОшибкамиОбмена") = 0 Тогда
		
		ЭтаФорма.ВладелецФормы.ВладелецФормы.ОбработкаНавигационнойСсылки(
			НавигационнаяСсылкаФорматированнойСтроки, СтандартнаяОбработка);
		
	Иначе
		ЭтаФорма.ВладелецФормы.ОбработкаНавигационнойСсылки(НавигационнаяСсылкаФорматированнойСтроки, СтандартнаяОбработка);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура КомандаНеРасшифровывать(Команда)
	Если ЗначениеЗаполнено(Причина) Тогда 
		КодВозврата = Новый Структура;
		КодВозврата.Вставить("Код", КодВозвратаДиалога.ОК);
		КодВозврата.Вставить("Причина", Причина);
	Иначе
		КодВозврата = КодВозвратаДиалога.ОК;
	КонецЕсли;		
	ЭтаФорма.Закрыть(КодВозврата);
КонецПроцедуры

&НаКлиенте
Процедура КомандаОтмена(Команда)
	ЭтаФорма.Закрыть(Неопределено);
КонецПроцедуры

#КонецОбласти
