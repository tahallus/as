
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Не Параметры.Свойство("Адрес") Тогда
		Отказ = Истина;
		Возврат;
	КонецЕсли;
	
	ТаблицаСертификатов = ПолучитьИзВременногоХранилища(Параметры.Адрес);
	НайденныеПодарочныеСертификаты.Загрузить(ТаблицаСертификатов);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовТаблицыФормыНайденныеподарочныеСертификаты

&НаКлиенте
Процедура НайденныеподарочныеСертификатыВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	СтруктураЗакрытия = Новый Структура;
	СтруктураЗакрытия.Вставить("ВидОплаты", ПредопределенноеЗначение("Перечисление.ВидыБезналичныхОплат.ПодарочныйСертификат"));
	СтруктураЗакрытия.Вставить("ПодарочныйСертификат", Элементы.НайденныеподарочныеСертификаты.ТекущиеДанные.ПодарочныйСертификат);
	СтруктураЗакрытия.Вставить("НомерСертификата", Элементы.НайденныеподарочныеСертификаты.ТекущиеДанные.НомерСертификата);
	СтруктураЗакрытия.Вставить("Остаток", Элементы.НайденныеподарочныеСертификаты.ТекущиеДанные.Остаток);
	
	Закрыть(СтруктураЗакрытия);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОК(Команда)
	
	СтруктураЗакрытия = Новый Структура;
	СтруктураЗакрытия.Вставить("ПодарочныйСертификат", Элементы.НайденныеподарочныеСертификаты.ТекущиеДанные.ПодарочныйСертификат);
	СтруктураЗакрытия.Вставить("НомерСертификата", Элементы.НайденныеподарочныеСертификаты.ТекущиеДанные.НомерСертификата);
	СтруктураЗакрытия.Вставить("Остаток", Элементы.НайденныеподарочныеСертификаты.ТекущиеДанные.Остаток);
	
	Закрыть(СтруктураЗакрытия);
	
КонецПроцедуры

#КонецОбласти