
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Параметры.Свойство("ТолькоЧисловые", ТолькоЧисловые);
	
	ОбновитьДеревоПараметровРасчета();
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
	
	Если ИмяСобытия="Запись_ПараметрыРасчетовДоставки" Тогда
		ОбновитьДеревоПараметровРасчета();
	КонецЕсли; 	
	
КонецПроцедуры

#КонецОбласти 

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура ПараметрыРасчетовПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа, Параметр)
	
	Отказ = Истина;
	СтруктураОткрытия = Новый Структура;
	Если Копирование Тогда
		ТекущаяСтрока = Элемент.ТекущиеДанные;
		Если ТекущаяСтрока=Неопределено ИЛИ НЕ ЗначениеЗаполнено(ТекущаяСтрока.Параметр) Тогда
			Возврат;
		КонецЕсли;
		СтруктураОткрытия.Вставить("ЗначениеКопирования", ТекущаяСтрока.Параметр);
	КонецЕсли; 
	ОткрытьФорму("Справочник.ПараметрыРасчетовДоставки.ФормаОбъекта", СтруктураОткрытия, Элемент, , , , , РежимОткрытияОкнаФормы.БлокироватьОкноВладельца);
	
КонецПроцедуры

&НаКлиенте
Процедура ПараметрыРасчетовОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
	
	ПараметрыРасчетовОбработкаВыбораСервер();
	
КонецПроцедуры

&НаСервере
Процедура ПараметрыРасчетовОбработкаВыбораСервер()
	
	ДоставкаСервер.ЗаполнитьДеревоПараметровРасчета(ПараметрыРасчетов, ТолькоЧисловые);
	
КонецПроцедуры

&НаКлиенте
Процедура ПараметрыРасчетовПередУдалением(Элемент, Отказ)
	
	Отказ = Истина;
	
КонецПроцедуры

&НаКлиенте
Процедура ПараметрыРасчетовВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	ПодключитьОбработчикОжидания("ПараметрыРасчетовВыборЗадержка", 0.1, Истина);
	
КонецПроцедуры

&НаКлиенте
Процедура ПараметрыРасчетовВыборЗадержка()
	
	СтрокаТабличнойЧасти = Элементы.ПараметрыРасчетов.ТекущиеДанные;
	Если СтрокаТабличнойЧасти.ПолучитьЭлементы().Количество()>0 Тогда
		Возврат;
	КонецЕсли; 
	ОповеститьОВыборе(СтрокаТабличнойЧасти.Идентификатор);
	
КонецПроцедуры

#КонецОбласти 

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Выбрать(Команда)
	
	СтрокаТабличнойЧасти = Элементы.ПараметрыРасчетов.ТекущиеДанные;
	Если СтрокаТабличнойЧасти<>Неопределено И СтрокаТабличнойЧасти.ПолучитьЭлементы().Количество()=0 Тогда
		ОповеститьОВыборе(СтрокаТабличнойЧасти.Идентификатор);
	КонецЕсли; 
	
КонецПроцедуры

#КонецОбласти 

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ОбновитьДеревоПараметровРасчета()
	
	ДоставкаСервер.ЗаполнитьДеревоПараметровРасчета(ПараметрыРасчетов, ТолькоЧисловые);
	
КонецПроцедуры
 
#КонецОбласти
 
