#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Элементы.Характеристика.Видимость = Номенклатура.ИспользоватьХарактеристики;
	Элементы.Партия.Видимость = Номенклатура.ИспользоватьПартии;
	
КонецПроцедуры

&НаКлиенте
Процедура Заполнить(Команда)
	
	Если Не ЗначениеЗаполнено(Номенклатура) Тогда
		ОбщегоНазначенияКлиент.СообщитьПользователю(НСтр("ru = 'Выберите номенклатуру'"));
		Возврат;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(Количество) И Не ПоВсемуКоличеству Тогда
		ОбщегоНазначенияКлиент.СообщитьПользователю(НСтр("ru = 'Введите количество'"));
		Возврат;
	КонецЕсли;
	
	ПараметрыЗакрытия = Новый Структура();
	ПараметрыЗакрытия.Вставить("Номенклатура", Номенклатура);
	ПараметрыЗакрытия.Вставить("Характеристика", Характеристика);
	ПараметрыЗакрытия.Вставить("Партия", Партия);
	ПараметрыЗакрытия.Вставить("Количество", Количество);
	ПараметрыЗакрытия.Вставить("ПоВсемуКоличеству", ПоВсемуКоличеству);
	
	ЭтаФорма.Закрыть(ПараметрыЗакрытия);
	
КонецПроцедуры

&НаКлиенте
Процедура ПоВсемуКоличествуПриИзменении(Элемент)
	
	Если ПоВсемуКоличеству Тогда
		Количество = 0;
	КонецЕсли;
	
	Элементы.Количество.Доступность = Не ПоВсемуКоличеству;
	
КонецПроцедуры

#КонецОбласти