&НаКлиенте
Перем КонтекстЭДОКлиент Экспорт;

#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// Пропускаем инициализацию, чтобы гарантировать получение формы при передаче параметра "АвтоТест".
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	ИдентификаторСтроки = 0;
	
	ТаблицаБанков = ПолучитьИзВременногоХранилища(Параметры.Адрес);
	Для каждого Банк Из ТаблицаБанков Цикл
		НовыйБанк = Банки.Добавить();
		ЗаполнитьЗначенияСвойств(НовыйБанк, Банк);
		
		Если НовыйБанк.Идентификатор = Параметры.Идентификатор Тогда
			ИдентификаторСтроки = НовыйБанк.ПолучитьИдентификатор();
		КонецЕсли;
	КонецЦикла;
	
	Элементы.Банки.ТекущаяСтрока = ИдентификаторСтроки;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы


#КонецОбласти

#Область ОбработчикиСобытийЭлементовТаблицыФормы

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ВыбратьБанк(Команда)
	
	ТекущиеДанные = Элементы.Банки.ТекущиеДанные;
	
	Если ТекущиеДанные = Неопределено Тогда
		ОбщегоНазначенияКлиент.СообщитьПользователю(НСтр("ru = 'Не выбран ни один банк'"));
	Иначе
		ВернутьРезультат();
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура БанкиВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	ВернутьРезультат();
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура ВернутьРезультат()
	
	ТекущиеДанные = Элементы.Банки.ТекущиеДанные;
	
	Если ТекущиеДанные <> Неопределено Тогда
		
		Результат = Новый Структура();
		Результат.Вставить("Идентификатор", ТекущиеДанные.Идентификатор);
		Результат.Вставить("Наименование", ТекущиеДанные.Наименование);
		Результат.Вставить("БИК", ТекущиеДанные.БИК);
		 
		Закрыть(Результат);
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти