
#Область ПрограммныйИнтерфейс

Функция ПредставлениеДокументаОснования(ДокОснование) Экспорт
	
	// для пустых ссылок возвращаем неопределено
	Если НЕ ЗначениеЗаполнено(ДокОснование) Тогда
		Возврат Неопределено;
	КонецЕсли;
	
	Если ОбщегоНазначения.СсылкаСуществует(ДокОснование) Тогда
		Возврат Строка(ДокОснование);
	Иначе
		Возврат "НетОбъекта";
	КонецЕсли;
	
КонецФункции

// Настроить группу ЦеныИВалюта.
// 
// Параметры:
// 	Форма - ФормаКлиентскогоПриложения - форма, в которой настраивается группа ЦеныИВалюта.
Процедура НастроитьГруппуЦеныИВалюты(Форма) Экспорт

	Если Не ПолучитьФункциональнуюОпцию("ИспользоватьНесколькоОрганизаций") Тогда
		Форма.Элементы.ЦеныИВалюта.МаксимальнаяШирина = Форма.Элементы.ЦеныИВалюта.МаксимальнаяШирина - 2;

		Если Форма.Элементы.Найти("ВидОперации") = Неопределено Тогда
			Форма.Элементы.ЦеныИВалюта.МаксимальнаяШирина = Форма.Элементы.ЦеныИВалюта.МаксимальнаяШирина - 2;
		КонецЕсли;

	КонецЕсли;

	Если (ПолучитьФункциональнуюОпцию("ИспользоватьДисконтныеКарты") <> Истина И Форма.Элементы.Найти(
		"СчитатьДисконтнуюКарту") <> Неопределено) Или (Форма.Элементы.Найти("СчитатьДисконтнуюКарту") <> Неопределено
		И Форма.Элементы.СчитатьДисконтнуюКарту.Видимость = Ложь) Тогда

		Форма.Элементы.ЦеныИВалюта.МаксимальнаяШирина = Форма.Элементы.ЦеныИВалюта.МаксимальнаяШирина + 4;

	КонецЕсли;

КонецПроцедуры

// Устарела. Следует использовать ОтчетыУНФ.ПолучитьПереопределенныйКомпоновщикНастроек
// или ОтчетыУНФВызовСервера.ПолучитьПереопределенныйКомпоновщикНастроек.
//
Функция ПолучитьКомпоновщикНастроекСервер(СвойстваОтчета, ПараметрыИОтборы = Неопределено) Экспорт
	
	Если ПараметрыИОтборы = Неопределено Тогда
		ПараметрыИОтборы = Новый Массив;
	КонецЕсли;
	
	Возврат ОтчетыУНФ.ПолучитьПереопределенныйКомпоновщикНастроек(СвойстваОтчета, ПараметрыИОтборы);
	
КонецФункции

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Функция РеквизитыДокументаОснования(ДокОснование) Экспорт
	
	Возврат ОбщегоНазначения.ЗначенияРеквизитовОбъекта(ДокОснование, "Номер,Дата,НомерВходящегоДокумента,ДатаВходящегоДокумента");

КонецФункции

Процедура УдалитьНедоступныеВидыОперацийДокументов(Операции) Экспорт
	
	//Комиссия
	Если НЕ ПолучитьФункциональнуюОпцию("ПриемТоваровНаКомиссию") Тогда
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийПриходнаяНакладная.ПриемНаКомиссию);
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийРасходнаяНакладная.ВозвратКомитенту);
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийСчетФактура.НаАвансКомитента);
	КонецЕсли;
	Если НЕ ПолучитьФункциональнуюОпцию("ПередачаТоваровНаКомиссию") Тогда
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийПриходнаяНакладная.ВозвратОтКомиссионера);
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийРасходнаяНакладная.ПередачаНаКомиссию);
	КонецЕсли;
	//Переработка
	Если НЕ ПолучитьФункциональнуюОпцию("ПередачаСырьяВПереработку") Тогда
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийЗаказПоставщику.ЗаказНаПереработку);
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийПриходнаяНакладная.ВозвратОтПереработчика);
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийРасходнаяНакладная.ПередачаВПереработку);
	КонецЕсли;
	Если НЕ ПолучитьФункциональнуюОпцию("ПереработкаДавальческогоСырья") Тогда
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийЗаказПокупателя.ЗаказНаПереработку);
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийПриходнаяНакладная.ПриемВПереработку);
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийРасходнаяНакладная.ВозвратИзПереработки);
	КонецЕсли;
	//ОтветХранение
	Если НЕ ПолучитьФункциональнуюОпцию("ПриемЗапасовНаОтветХранение") Тогда
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийПриходнаяНакладная.ПриемНаОтветХранение);
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийРасходнаяНакладная.ВозвратСОтветХранения);
	КонецЕсли;
	Если НЕ ПолучитьФункциональнуюОпцию("ПередачаЗапасовНаОтветХранение") Тогда
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийПриходнаяНакладная.ВозвратСОтветХранения);
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийРасходнаяНакладная.ПередачаНаОтветхранение);
	КонецЕсли;
	//Корректировки
	Если НЕ ПолучитьФункциональнуюОпцию("ИспользоватьКорректировкиРеализаций") Тогда
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийСчетФактура.Корректировка);
	КонецЕсли;
	Если НЕ ПолучитьФункциональнуюОпцию("ИспользоватьКорректировкиПоступлений") Тогда
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийСчетФактураПолученный.Корректировка);
	КонецЕсли;
	Если НЕ ПолучитьФункциональнуюОпцию("ИспользоватьКорректировкиРеализаций") И НЕ ПолучитьФункциональнуюОпцию("ИспользоватьКорректировкиПоступлений") Тогда
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийИсправленияПоступленияРеализации.ИсправлениеОшибки);
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийИсправленияПоступленияРеализации.СогласованноеИзменение);
	КонецЕсли;	
	
	//Работы
	Если НЕ ПолучитьФункциональнуюОпцию("ИспользоватьПодсистемуРаботы") Тогда
		УдалитьОперацию(Операции, Перечисления.ВидыОперацийЗаказПокупателя.ЗаказНаряд);
	КонецЕсли;
	
КонецПроцедуры

Процедура УдалитьОперацию(Операции, ЗначениеУдаления)
	
	Если ТипЗнч(Операции) = Тип("СписокЗначений") Тогда
		СтрокаДляУдаления = Операции.НайтиПоЗначению(ЗначениеУдаления);
		Если СтрокаДляУдаления<>Неопределено Тогда
			Операции.Удалить(СтрокаДляУдаления);
		КонецЕсли;
	ИначеЕсли ТипЗнч(Операции) = Тип("ДеревоЗначений") Тогда
		НайтиУдалитьВДереве(Операции, ЗначениеУдаления);
	КонецЕсли;

КонецПроцедуры

Процедура НайтиУдалитьВДереве(Операции, ЗначениеУдаления)
	
	Для Каждого Док Из Операции.Строки Цикл
		
		ПодчиненныеОперации = док.Строки;
		Для Каждого операция Из ПодчиненныеОперации Цикл
			Если операция.ВидОперации = ЗначениеУдаления Тогда
				ПодчиненныеОперации.Удалить(операция);
			КонецЕсли;
		КонецЦикла;
	КонецЦикла;
	
	Для Каждого Док Из Операции.Строки Цикл
		Если Док.Строки.Количество()=0 Тогда
			Операции.Строки.Удалить(Док);
		КонецЕсли;
	КонецЦикла;
	
КонецПроцедуры

Функция СсылкаВариантаОтчета(ИмяОтчета, КлючВарианта) Экспорт
	
	Отчет = ОбщегоНазначения.ИдентификаторОбъектаМетаданных("Отчет."+ИмяОтчета);
	Возврат ВариантыОтчетов.ВариантОтчета(Отчет, КлючВарианта);
	
КонецФункции

#КонецОбласти

#Область РаботаССериямиНоменклатуры

// Устарела. Будет удалена в следующей версии программы. 
// См. СерииНоменклатурыУНФ.ПолучитьСерииНоменклатурыИзХранилища
Функция ПолучитьСерииНоменклатурыИзХранилища(Объект, АдресЗапасовВХранилище, КлючСвязи, ПараметрыИменаПолей=Неопределено) Экспорт
	
	Возврат СерииНоменклатурыУНФ.ПолучитьСерииНоменклатурыИзХранилища(Объект, АдресЗапасовВХранилище, КлючСвязи, ПараметрыИменаПолей);
	
КонецФункции // ПолучитьСерииНоменклатурыИзХранилища()

// Устарела. Будет удалена в следующей версии программы. 
// См. СерииНоменклатурыУНФ.ПолучитьСерииНоменклатурыИзХранилищаДляПоляВвода
Функция ПолучитьСерииНоменклатурыИзХранилищаДляПоляВвода(Объект, АдресЗапасовВХранилище) Экспорт
	
	Возврат СерииНоменклатурыУНФ.ПолучитьСерииНоменклатурыИзХранилищаДляПоляВвода(Объект, АдресЗапасовВХранилище);
	
КонецФункции // ПолучитьСерииНоменклатурыИзХранилища()

// Устарела. Будет удалена в следующей версии программы. 
// См. СерииНоменклатурыУНФ.ПолучитьСерияИзХранилища
Функция ПолучитьСерияИзХранилища(Объект, АдресЗапасовВХранилище) Экспорт
	
	СерииНоменклатурыУНФ.ПолучитьСерияИзХранилища(Объект, АдресЗапасовВХранилище);
	
КонецФункции // ПолучитьСерииНоменклатурыИзХранилища()

// Устарела. Будет удалена в следующей версии программы. 
// См. СерииНоменклатурыУНФ.ПараметрыПодбораСерийНоменклатуры
Функция ПараметрыПодбораСерийНоменклатуры(ДокОбъект, УИДФормы, ИДСтроки, РежимПодбора = Неопределено, ИмяТЧ="Запасы", ИмяТЧСерийНоменклатуры="СерииНоменклатуры", ИмяПоляКлючСвязи = "КлючСвязи",
	ЭтоОприходование = Ложь) Экспорт
	
	Возврат СерииНоменклатурыУНФ.ПараметрыПодбораСерийНоменклатуры(ДокОбъект, УИДФормы, ИДСтроки, РежимПодбора, ИмяТЧ, ИмяТЧСерийНоменклатуры, ИмяПоляКлючСвязи, ЭтоОприходование);
	
КонецФункции

// Устарела. Будет удалена в следующей версии программы. 
// См. СерииНоменклатурыУНФ.ПодготовитьПараметрыСерийНоменклатуры
Функция ПодготовитьПараметрыСерийНоменклатуры(ДокОбъект, ТекСтрокаДанные, УИДФормы, ИмяТЧ = "Запасы", ИмяТЧСерийНоменклатуры="СерииНоменклатуры", ИмяПоляКлючСвязи = "КлючСвязи",
	ЭтоОприходование = Ложь) Экспорт
	
	Возврат СерииНоменклатурыУНФ.ПодготовитьПараметрыСерийНоменклатуры(ДокОбъект, ТекСтрокаДанные, УИДФормы, ИмяТЧ, ИмяТЧСерийНоменклатуры, ИмяПоляКлючСвязи, ЭтоОприходование);
	
КонецФункции

// Устарела. Будет удалена в следующей версии программы. 
// См. СерииНоменклатурыУНФ.ПараметрыПодбораСерийНоменклатурыВПолеВвода
Функция ПараметрыПодбораСерийНоменклатурыВПолеВвода(ДокОбъект, УИДФормы, РежимПодбора = Неопределено) Экспорт
	
	Возврат СерииНоменклатурыУНФ.ПараметрыПодбораСерийНоменклатурыВПолеВвода(ДокОбъект, УИДФормы, РежимПодбора);
	
КонецФункции

// Устарела. Будет удалена в следующей версии программы. 
// См. СерииНоменклатурыУНФ.ПараметрыПодбораСерийНоменклатурыДляРемонтов
Функция ПараметрыПодбораСерийНоменклатурыДляРемонтов(ДокОбъект, УИДФормы, РежимПодбора = Неопределено) Экспорт
	
	Возврат СерииНоменклатурыУНФ.ПараметрыПодбораСерийНоменклатурыДляРемонтов(ДокОбъект, УИДФормы, РежимПодбора);
	
КонецФункции

// Устарела. Будет удалена в следующей версии программы. 
// См. СерииНоменклатурыУНФ.ПолучитьДанныеНоменклатураПриИзменении
Функция ПолучитьДанныеНоменклатураПриИзменении(СтруктураДанные) Экспорт
	
	Возврат СерииНоменклатурыУНФ.ПолучитьДанныеНоменклатураПриИзменении(СтруктураДанные);
	
КонецФункции

// Устарела. Будет удалена в следующей версии программы. 
// См. СерииНоменклатурыУНФ.РассчитатьСуммуВСтрокеТабличнойЧасти
Процедура РассчитатьСуммуВСтрокеТабличнойЧасти(СтрокаТабличнойЧасти, СуммаВключаетНДС) Экспорт
	
	СерииНоменклатурыУНФ.РассчитатьСуммуВСтрокеТабличнойЧасти(СтрокаТабличнойЧасти, СуммаВключаетНДС);
	
КонецПроцедуры // РассчитатьСуммуВСтрокеТабличнойЧасти()

// Устарела. Будет удалена в следующей версии программы. 
// См. СерииНоменклатурыУНФВызовСервера.ЗаполнитьКлючиСвязи
Процедура ЗаполнитьКлючиСвязи(Объект, ИмяТЧ, ИмяПоляКлючСвязи = "КлючСвязи") Экспорт
	
	СерииНоменклатурыУНФ.ЗаполнитьКлючиСвязи(Объект, ИмяТЧ, ИмяПоляКлючСвязи);
	
КонецПроцедуры // ЗаполнитьКлючиСвязиВТабличнойЧастиТовары()

#КонецОбласти