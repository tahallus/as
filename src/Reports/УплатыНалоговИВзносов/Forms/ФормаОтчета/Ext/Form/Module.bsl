#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Параметры.СформироватьПриОткрытии = Истина;
	Отчет.Период = Параметры.Период;
	
	Если ЗначениеЗаполнено(Параметры.Организация) Тогда
		Организация = Параметры.Организация;
	Иначе
		Организация = УправлениеНебольшойФирмойПовтИсп.ПолучитьЗначениеПоУмолчаниюПользователя(Пользователи.ТекущийПользователь(), "ОсновнаяОрганизация");
		Если Не ЗначениеЗаполнено(Организация) Тогда
			Организация = Справочники.Организации.ПредопределеннаяОрганизация();
		КонецЕсли;
	КонецЕсли;
	Если Параметры.УчетВыплатТекущегоГода Тогда
		Настройка  = Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("УчетВыплатТекущегоГода");
		Если Настройка <> Неопределено Тогда
			Настройка.Использование = Истина;
			Настройка.Значение = Истина;
		КонецЕсли;
	КонецЕсли;
	УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "Организация", Организация);
	УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "ВидВзаиморасчетов", Параметры.ВидВзаиморасчетов);
	Настройка  = Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("ЗадачиКалендаря");
	Если Настройка <> Неопределено Тогда
		Настройка.Использование = Истина;
		Настройка.Значение = Параметры.ЗадачиКалендаря;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ПриЗагрузкеВариантаНаСервере(Настройки)
	
	Если Параметры.УчетВыплатТекущегоГода Тогда
		Настройка  = Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("УчетВыплатТекущегоГода");
		Если Настройка <> Неопределено Тогда
			Настройка.Использование = Истина;
			Настройка.Значение = Истина;
		КонецЕсли;
	КонецЕсли;
	УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "Организация", Организация);
	УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "ВидВзаиморасчетов", Параметры.ВидВзаиморасчетов);
	Если Параметры.ВидВзаиморасчетов.Количество() = 1
		И Параметры.ВидВзаиморасчетов[0].Значение = Справочники.ВидыНалогов.ПФРСвыше300ТР Тогда
		УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "СрокУплаты", ДобавитьМесяц(НачалоГода(Параметры.Период.ДатаНачала),4));
	КонецЕсли;
	Настройка  = Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("ЗадачиКалендаря");
	Если Настройка <> Неопределено Тогда
		Настройка.Использование = Истина;
		Настройка.Значение = Параметры.ЗадачиКалендаря;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ПриЗагрузкеДанныхИзНастроекНаСервере(Настройки)
	
	Если Параметры.УчетВыплатТекущегоГода Тогда
		Настройка  = Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("УчетВыплатТекущегоГода");
		Если Настройка <> Неопределено Тогда
			Настройка.Использование = Истина;
			Настройка.Значение = Истина;
		КонецЕсли;
	КонецЕсли;
	УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "Организация", Организация);
	УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "ВидВзаиморасчетов", Параметры.ВидВзаиморасчетов);
	Если Параметры.ВидВзаиморасчетов.Количество() = 1
		И Параметры.ВидВзаиморасчетов[0].Значение = Справочники.ВидыНалогов.ПФРСвыше300ТР Тогда
		УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "СрокУплаты", ДобавитьМесяц(НачалоГода(Параметры.Период.ДатаНачала),4));
	КонецЕсли;
	Настройка  = Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("ЗадачиКалендаря");
	Если Настройка <> Неопределено Тогда
		Настройка.Использование = Истина;
		Настройка.Значение = Параметры.ЗадачиКалендаря;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ПриЗагрузкеПользовательскихНастроекНаСервере(Настройки)
	
	Если Параметры.УчетВыплатТекущегоГода Тогда
		Настройка  = Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("УчетВыплатТекущегоГода");
		Если Настройка <> Неопределено Тогда
			Настройка.Использование = Истина;
			Настройка.Значение = Истина;
		КонецЕсли;
	КонецЕсли;
	УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "Организация", Организация);
	УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "ВидВзаиморасчетов", Параметры.ВидВзаиморасчетов);
	Если Параметры.ВидВзаиморасчетов.Количество() = 1
		И Параметры.ВидВзаиморасчетов[0].Значение = Справочники.ВидыНалогов.ПФРСвыше300ТР Тогда
		УправлениеНебольшойФирмойОтчеты.УстановитьЗначениеПользовательскойНастройки(Отчет.КомпоновщикНастроек, "СрокУплаты", ДобавитьМесяц(НачалоГода(Параметры.Период.ДатаНачала),4));
	КонецЕсли;
	Настройка  = Отчет.КомпоновщикНастроек.Настройки.ПараметрыДанных.Элементы.Найти("ЗадачиКалендаря");
	Если Настройка <> Неопределено Тогда
		Настройка.Использование = Истина;
		Настройка.Значение = Параметры.ЗадачиКалендаря;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти 
