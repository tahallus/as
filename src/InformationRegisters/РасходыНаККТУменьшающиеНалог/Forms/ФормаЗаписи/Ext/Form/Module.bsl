
#Область ОбработчикиФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если Параметры.ЗначенияЗаполнения.Свойство("ЗаписьКалендаря") Тогда
		Элементы.ЗаписьКалендаря.Видимость = Ложь;
		Элементы.ОбъектУменьшенияНалога.Видимость = Ложь;
		Элементы.КодПООКТМО.Видимость = Ложь;
		Элементы.КодИФНС.Видимость = Ложь;
		
	КонецЕсли;
	ПредельныйВычет = РегистрыСведений.РасходыНаККТУменьшающиеНалог.ПредельныйРазмерВычетаПоРасходамНаККТ();
	
КонецПроцедуры


&НаКлиенте
Процедура ПослеЗаписи(ПараметрыЗаписи)
	Оповестить("ЗаписьРасходыНаКТТ", Новый Структура("ЗаписьКалендаря, ОбъектУменьшенияНалога, КодПООКТМО, КодИФНС", Запись.ЗаписьКалендаря, Запись.ОбъектУменьшенияНалога, Запись.КодПООКТМО, Запись.КодИФНС));
КонецПроцедуры

&НаКлиенте
Процедура РасходыУменьшающиеНалогПриИзменении(Элемент)
	
	Если Запись.РасходыУменьшающиеНалог > ПредельныйВычет Тогда
		ТекстПредупреждения = СтрШаблон(НСтр("ru = 'Неверно указана сумма уменьшающих налог расходов на приобретение ККТ.
			|Максимально допустимая сумма - %1 руб.'"), ПредельныйВычет);
		ОбщегоНазначенияКлиент.СообщитьПользователю(ТекстПредупреждения,, "РасходыУменьшающиеНалог");
		Возврат;
	КонецЕсли;

КонецПроцедуры

#КонецОбласти