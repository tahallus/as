
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("ИсточникПривлечения", ИсточникПривлеченияВладелец) Тогда
		Запись.ИсточникПривлечения = ИсточникПривлеченияВладелец;
	КонецЕсли;
	
	Если НЕ ЗначениеЗаполнено(Запись.Ответственный) И Параметры.Ключ.Пустой() Тогда
		Запись.Ответственный = УправлениеНебольшойФирмойПовтИсп.ПолучитьЗначениеПоУмолчаниюПользователя(Пользователи.ТекущийПользователь(), "ОсновнойОтветственный");
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ОбработкаПроверкиЗаполненияНаСервере(Отказ, ПроверяемыеРеквизиты)
	
	Если Запись.ДатаОкончания < Запись.ДатаНачала Тогда
		
		ОбщегоНазначения.СообщитьПользователю(
			НСтр("ru='Дата окончания не может быть меньше даты начала.'"),
			,
			"ДатаОкончания",
			,
			Отказ
		);
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиЭлементовФормы

&НаКлиенте
Процедура ДатаНачалаПриИзменении(Элемент)
	
	Если Запись.ДатаОкончания < Запись.ДатаНачала Тогда
		Запись.ДатаОкончания = Запись.ДатаНачала;
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти